<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">

        <title>HackBCA 20XX</title>
        <link rel="shortcut icon" type="image/jpg" href="images/favicon.ico"/>

        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

        <link rel="stylesheet" href="styles/main.css">

        <link rel="stylesheet" href="styles/tables.css">
    </head>
    <body>
    <header>
        <nav>
            <div class="nav-wrapper">
                <img class="hide-on-small-and-down" src="images/bca-logo-transparent.png">
                <a href="index.html" class="brand-logo">HackBCA 20XX</a>
                <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                <ul id="desktop-nav" class="right hide-on-med-and-down">
                    <li><a href="events.html"><i class="material-icons left">event</i>Events</a></li>
                    <li><a href="attendees.html"><i class="material-icons left">people</i>Attendees</a></li>
                    <li><a href="projects.html"><i class="material-icons left">build</i>Projects</a></li>
                    <li><a href="login.html" class="btn">Login / Register</a></li>
                </ul>
            </div>
        </nav>
        <ul id="mobile-nav" class="sidenav">
            <li><a href="events.html"><i class="material-icons left">event</i>Events</a></li>
            <li><a href="attendees.html"><i class="material-icons left">people</i>Attendees</a></li>
            <li><a href="projects.html"><i class="material-icons left">build</i>Projects</a></li>
            <li><a href="login.html" class="btn">Login / Register</a></li>
        </ul>
    </header>
    <main>
        <div class="container">
            
            <h1>Event Schedule</h1>
            
            <blockquote>
                Click on the event name for more details! 
                Click on <i class="material-icons tiny">sort</i> to sort by that column, or items in <i class="material-icons tiny">filter_list</i> columns to filter by that item.    
            </blockquote>
            <div class="row">
                <div class="col l3 s12 "> <i class="left material-icons">sort</i>Sorted by: Date / Time</div> 
                <div class="col l3 offset-l6 ">
                    <!-- Position diffeently (left) for mobile -->
                    <div class="right hide-on-small-only"><i class="left material-icons">filter_list</i>Filter: None</div>
                    <div class="left hide-on-med-and-up"><i class="left material-icons">filter_list</i>Filter: None</div>
                </div>

            </div>
                
            <!-- https://materializecss.com/table.html -->
            <table class="highlight centered responsive-table">
            <thead>
                <tr>
                <th><i class="material-icons">star</i>  
                    <a href="?sort=starred"><i class="material-icons">sort</i></a>
                </th> <!-- USER ONLY-->
                <th>Event</th>
                <th>Location  <a href="?sort=location">
                        <i class="material-icons">sort</i></a> 
                        <i class="material-icons">filter_list</i>
                </th>
                <th>Date / Time 
                    <a href="?sort=datetime"><i class="material-icons">sort</i></a>
                </th>
                <th>Duration</th>
                <th>Type  
                    <a href="?sort=type"><i class="material-icons">sort</i></a>
                    <i class="material-icons">filter_list</i>
                </th>
                <th>Interest<i class="material-icons">sort</i></th>
                </tr>
                <!-- ADMIN ONLY BUTTONS -->
                <th>Admin Op</th>
            </thead>
    
            <tbody>
                <tr> 

                <!-- USER ONLY - Initialize page with appropriate state of button -->

                    <td>
                        <a onclick='toggleInterest(this, "{{ event_id }}")' class="btn-floating btn-small waves-effect waves-light scale-transition scale-in blue"><i class="material-icons">star_border</i></a>
                        <!-- <a onclick='toggleInterest(this, "{{ event_id }}"))'class="btn-floating btn-small waves-effect waves-light scale-transition scale-in yellow"><iclass="material-icons">star</i></a> -->
                    </td> 
                    <td class="blue-text clickable" onclick="location.href='./event.html'">Opening Ceremony</td> <!-- General: './{{ event_id }}/' -->
                    <td> <a href='?filter=location:Auditorium'>Auditorium </a></td>
                    <td>May 2 (Sat) 08:30 AM</td>
                    <td>45m</td>
                    <td> <a href='?filter=type:Main'>Main</a></td>
                    <td>10<i class=material-icons>people</i></td>
                    <!-- ADMIN ONLY BUTTONS -->
                    <td nowrap>
                                    
                        <!-- Alternatively to going to a new page, trigger a modal ??-->
                        <a class="btn-floating btn-small waves-effect waves-light green lighten-1" href="./{{ event_id }}/modify"><i class="material-icons">edit</i></a>
                        <!-- Alternatively to a redirect/refresh, use a fetch(... {method: 'DELETE'} request??-->
                        <a class="btn-floating waves-effect waves-light red" onclick='confirmDelete("Opening Ceremony","{{ event_id}}")'><i class="material-icons">delete</i></a>

                    </td>
                </tr>

                <tr> 

                    <!-- USER ONLY - Initialize page with appropriate state of button -->
    
                        <td>
                            <a onclick='toggleInterest(this, "{{ event_id }}")' class="btn-floating btn-small waves-effect waves-light scale-transition scale-in blue"><i class="material-icons">star_border</i></a>
                            <!-- <a onclick='toggleInterest(this, "{{ event_id }}"))'class="btn-floating btn-small waves-effect waves-light scale-transition scale-in yellow"><iclass="material-icons">star</i></a> -->
                        </td> 
                        <td class="blue-text clickable" onclick="location.href='./event.html'">Opening Ceremony</td> <!-- General: './{{ event_id }}/' -->
                        <td> <a href='?filter=location:Auditorium'>Auditorium </a></td>
                        <td>May 2 (Sat) 08:30 AM</td>
                        <td>45m</td>
                        <td> <a href='?filter=type:Main'>Main</a></td>
                        <td>10<i class=material-icons>people</i></td>
                        <!-- ADMIN ONLY BUTTONS -->
                        <td nowrap>
                                        
                            <!-- Alternatively to going to a new page, trigger a modal ??-->
                            <a class="btn-floating btn-small waves-effect waves-light green lighten-1" href="./{{ event_id }}/modify"><i class="material-icons">edit</i></a>
                            <!-- Alternatively to a redirect/refresh, use a fetch(... {method: 'DELETE'} request??-->
                            <a class="btn-floating waves-effect waves-light red" onclick='confirmDelete("Opening Ceremony","{{ event_id}}")'><i class="material-icons">delete</i></a>
    
                        </td>
                    </tr>

            </tbody>
            </table>
        </div>

        <a href="./newevent.html" class="btn-floating btn-large orange fixed-action-btn">
            <i class="large material-icons">create</i>
        </a>
    </main>

    <footer class="page-footer">
        <div class="container">
          <div class="row">
            <div class="col l6 s12">
              <h5 class="white-text">Sponsors</h5>
              <p >hackBCA is brought to you by:</p>
              <ul>
                <li>BCA PPO</li>
                <li>Tech-Pa</li>
                <li>&lt;Corporate Sponsors&gt;</li>
                <li>Wanna join this list? Sponsor us!</li>
              </ul>
            </div>
            <div class="col l4 offset-l2 s12">
              <h5 class="white-text">Contact Us</h5>
              <ul>
                <li>Twitter: @hackbca</li>
                <li>Instagram: @hackbca</li>
                <li>Facebook: @hackbca</li>
                <li>Email: hackbca@_____</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="footer-copyright">
          <div class="container">
          Â© 2021 Copyright Text
          <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
          </div>
        </div>
      </footer>

    <script>
        function toggleInterest(interestButton, event_id){
            let interestButtonIcon = interestButton.children[0];
            switch(interestButtonIcon.textContent) {
            case "star_border": //currently off, toggle on.
                console.log("Toggle On!")
                interestButton.classList.replace("scale-in", "scale-out");
                
                //Send update to server, wait for confirmation before showing on button
                //Simulate waiting with timeout for now...
                setTimeout(function(){
                    interestButtonIcon.textContent = "star";
                    interestButton.classList.replace("blue", "yellow");
                    interestButton.classList.replace("scale-out", "scale-in");
                }, 500);
                
            break;
            case "star": //currently on, toggle off
                console.log("Toggle Off!")
                interestButton.classList.replace("scale-in", "scale-out");

                //Send update to server, wait for confirmation before showing on button
                //Simulate waiting with timeout for now...
                setTimeout(function(){
                    interestButtonIcon.textContent = "star_border";
                    interestButton.classList.replace("yellow", "blue");
                    interestButton.classList.replace("scale-out", "scale-in");
                }, 500);
            break;
            default: //currently in star_half, processing... don't do anything yet.
            }
            //Until server response comes, show a "processing" symbol - which means clicking does nothing until response comes.
            interestButtonIcon.textContent = "star_half";
        }

        
        function confirmDelete(event_name, event_id){
            if(confirm(`Are you sure you want to delete the event ${event_name} (id ${event_id})? This is PERMANENT and cannot be undone.`)) {
                //make delete request
                //Check for 204, successful not content (404 possible... handle?)
                //What to do next is not widely agreed upon: Return to events page?
                window.location.href = "./events.html";

            }
        }
    </script>
    <!-- Compiled and minified JavaScript -->
    <script src="js/materialize.min.js"></script>

    <!-- initialize Materialize elements -->
    <script> M.AutoInit(); </script>

    </body>
</html>