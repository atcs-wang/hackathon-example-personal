<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">

        <title>HackBCA 20XX</title>
        <link rel="shortcut icon" type="image/jpg" href="images/favicon.ico"/>

        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="styles/materialize.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

        <link rel="stylesheet" href="styles/main.css">
        <link rel="stylesheet" href="styles/tables.css">
        <link rel="stylesheet" href="styles/event.css">
    </head>
    <body>
    <header>
        <nav>
            <div class="nav-wrapper">
                <img class="hide-on-small-and-down" src="images/bca-logo-transparent.png">
                <a href="index.html" class="brand-logo">HackBCA 20XX</a>
                <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                <ul id="desktop-nav" class="right hide-on-med-and-down">
                    <li><a href="events.html"><i class="material-icons left">event</i>Events</a></li>
                    <li><a href="attendees.html"><i class="material-icons left">people</i>Attendees</a></li>
                    <li><a href="projects.html"><i class="material-icons left">build</i>Projects</a></li>
                    <li><a href="login.html" class="btn">Login / Register</a></li>
                </ul>
            </div>
        </nav>
        <ul id="mobile-nav" class="sidenav">
            <li><a href="events.html"><i class="material-icons left">event</i>Events</a></li>
            <li><a href="attendees.html"><i class="material-icons left">people</i>Attendees</a></li>
            <li><a href="projects.html"><i class="material-icons left">build</i>Projects</a></li>
            <li><a href="login.html" class="btn">Login / Register</a></li>
        </ul>
    </header>
    <main>
        <div class="container">

                  <div class="card">
                    <!-- image is optional -->
                    <div class="card-image">
                        <!-- Added div wrapper to create dark gradient -->
                        <div class="card-image-gradient"> 
                            <img src="images/assembly.jpg">
                        </div>
                        <span class="card-title"><h1>Opening Ceremony</h1></span>
                      <!-- USER ONLY - Initialize page with appropriate state of button -->
                      <a onclick='toggleInterest(this, "{{ event_id }}")' class="btn-floating btn-large halfway-fab waves-effect waves-light scale-transition scale-in blue"><i class="material-icons">star_border</i></a>
                      <!-- <a onclick='toggleInterest(this, "{{ event_id }}"))'class="btn-floating btn-large halfway-fab waves-effect waves-light scale-transition scale-in yellow"><iclass="material-icons">star</i></a> -->
                        
                    </div>
                    <div class="card-content">

                        <table class="centered responsive-table">
                            <thead>
                                <tr>
                                <th>Location </th>
                                <th>Date / Time </th>
                                <th>Duration</th>
                                <th>Type </th>
                                <th>Interest </th>
                                <!-- ADMIN ONLY BUTTONS -->
                                <th>Admin Op</th>
                                
                                </tr>
                            </thead>
                            <tbody>
                                <tr>

                                <td>Auditorium </td>
                                <td>May 2 (Sat) 08:30 AM</td>
                                <td>45m</td>
                                <td>Main</td>
                                <td>10<i class=material-icons>people</i></td>
                                <!-- ADMIN ONLY BUTTONS -->

                                <td nowrap>
                                  
                                    <!-- Alternatively to going to a new page, trigger a modal ??-->
                                    <a class="btn-floating waves-effect waves-light green lighten-1" href="./modify"><i class="material-icons">edit</i></a>
                                    <!-- Alternatively to a redirect/refresh, use a fetch(... {method: 'DELETE'} request??-->
                                    <a class="btn-floating waves-effect waves-light red" onclick='confirmDelete("Opening Ceremony","{{ event_id}}")'><i class="material-icons">delete</i></a>
        
                                </td>

                            </tbody>
                        </table>
                        <div class="container">
                            <p> The opening ceremony will be rad! Don't miss it. Or you're technically late.</p>
                        </div>

                        <!-- TODO: Add a scrollable table (or series of cards??) listing the attendees who are interested -->
                        <!-- https://vembarrajan.medium.com/html-css-tricks-scroll-able-table-body-tbody-d23182ae0fbc -->
                    </div>
                  </div>
            
    
        </div>
    </main>

    <footer class="page-footer">
        <div class="container">
          <div class="row">
            <div class="col l6 s12">
              <h5 class="white-text">Sponsors</h5>
              <p >hackBCA is brought to you by:</p>
              <ul>
                <li>BCA PPO</li>
                <li>Tech-Pa</li>
                <li>&lt;Corporate Sponsors&gt;</li>
                <li>Wanna join this list? Sponsor us!</li>
              </ul>
            </div>
            <div class="col l4 offset-l2 s12">
              <h5 class="white-text">Contact Us</h5>
              <ul>
                <li>Twitter: @hackbca</li>
                <li>Instagram: @hackbca</li>
                <li>Facebook: @hackbca</li>
                <li>Email: hackbca@_____</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="footer-copyright">
          <div class="container">
          Â© 2021 Copyright Text
          <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
          </div>
        </div>
      </footer>

    <!-- initialize Materialize Sidenav elements -->
    <script>

        function toggleInterest(interestButton, event_id){
            let interestButtonIcon = interestButton.children[0];
            switch(interestButtonIcon.textContent) {
            case "star_border": //currently off, toggle on.
                console.log("Toggle On!")
                interestButton.classList.replace("scale-in", "scale-out");
                
                //Send update to server, wait for confirmation before showing on button
                //Simulate waiting with timeout for now...
                setTimeout(function(){
                    interestButtonIcon.textContent = "star";
                    interestButton.classList.replace("blue", "yellow");
                    interestButton.classList.replace("scale-out", "scale-in");
                }, 500);
                
            break;
            case "star": //currently on, toggle off
                console.log("Toggle Off!")
                interestButton.classList.replace("scale-in", "scale-out");

                //Send update to server, wait for confirmation before showing on button
                //Simulate waiting with timeout for now...
                setTimeout(function(){
                    interestButtonIcon.textContent = "star_border";
                    interestButton.classList.replace("yellow", "blue");
                    interestButton.classList.replace("scale-out", "scale-in");
                }, 500);
            break;
            default: //currently in star_half, processing... don't do anything yet.
            }
            //Until server response comes, show a "processing" symbol - which means clicking does nothing until response comes.
            interestButtonIcon.textContent = "star_half";
        }

        function confirmDelete(event_name, event_id){
            if(confirm(`Are you sure you want to delete the event ${event_name} (id ${event_id})? This is PERMANENT and cannot be undone.`)) {
                //make delete request
                //Check for 204, successful not content (404 possible... handle?)
                //Return to events page
                window.location.href = "./events.html";

            }
        }
    </script>

    <!-- Compiled and minified JavaScript -->
    <script src="js/materialize.min.js"></script>

    <!-- initialize Materialize elements -->
    <script> M.AutoInit(); </script>
    </body>
</html>